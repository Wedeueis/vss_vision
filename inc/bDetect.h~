#include "opencv2/opencv.hpp"
#include <stdlib.h>
#include <iostream>
#include <string>
#include <json/json.h>
#include <fstream>
#include <vector>

cv::Mat Gframe;
cv::Scalar mean_color;
double x_color, y_color;
int colorH, colorS, colorV, rangeH, rangeS, rangeV;
cv::Point2f fieldCorners[4];
double resize;
int selectedCorner;
char state;

void on_trackbar(int);
void changeCameraProp(std::string key, std::string value, Json::Value root);
void createTrackBars();
cv::Mat fieldCornersUpdated(cv::Point2f perspectiveIn[], cv::Size size);
void actionPickCorners(cv::VideoCapture &cap, Json::Value &root);
void actionConfigureColors(cv::VideoCapture &cap, Json::Value &root);
void CallBackFunc(int event, int x, int y, int flags, void* userdata);
void colorDetection(cv::Mat src, cv::Mat &mask,cv::Scalar colors[], int it);
void findPos(cv::Mat &src,cv::Mat &tgt, std::vector<std::vector<cv::Point> > &contours,
              std::vector<cv::Vec4i> &hierarchy, Json::Value &root, float k);
void saveInJson(Json::Value root);
